<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Ticketing System</title>
    <style>
        /* Your CSS styles here */
        /* Add your custom styles here */
        body {
            font-family: Arial, sans-serif;
        }

        header {
            background-color: #333;
            color: white;
            padding: 1rem;
            text-align: center;
        }

        section {
            margin: 20px;
        }

        .event-card {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            display: inline-block;
            width: 200px;
            text-align: center;
        }

        .cart {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            text-align: center;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 1rem;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>

    <header>
        <h1>Event Ticketing System</h1>
    </header>

    <section id="events">
        <h2>Browse Events</h2>
        <!-- Events will be dynamically populated here -->
    </section>

    <section id="cart">
        <h2>Shopping Cart</h2>
        <div class="cart">
            <!-- Display items in the cart here -->
            <p id="cart-items">No items in the cart</p>
            <hr>
            <p>Total: $<span id="cart-total">0.00</span></p>
            <button onclick="checkout()">Checkout</button>
        </div>
    </section>

    <footer>
        <p>&copy; 2024 Event Ticketing System</p>
    </footer>

    <script>
        // Your JavaScript code here

        async function fetchEvents() {
            try {
                const response = await fetch('/api/events');

                if (!response.ok) {
                    throw new Error(`Server responded with status: ${response.status}`);
                }

                const events = await response.json();

                const eventsSection = document.getElementById('events');

                if (!Array.isArray(events)) {
                    eventsSection.innerHTML = '<p>Error fetching events</p>';
                } else if (events.length === 0) {
                    eventsSection.innerHTML = '<p>No events available</p>';
                } else {
                    eventsSection.innerHTML = ''; // Clear previous content

                    events.forEach(event => {
                        const eventCard = document.createElement('div');
                        eventCard.className = 'event-card';
                        
                        const formattedDate = event.event_date ? new Date(event.event_date).toLocaleDateString() : 'Unknown Date';
                        
                        eventCard.innerHTML = `
                            <h3>${event.event_name || 'Unknown Event'}</h3>
                            <p>Date: ${formattedDate}</p>
                            <p>Time: ${event.event_time || 'Unknown Time'}</p>
                            <p>Address: ${event.event_adress || 'Unknown Address'}</p>
                            <p>Category: ${event.event_category || 'Unknown Category'}</p>
                            <p>Price: $${(event.ticket_price || 0).toFixed(2)}</p>
                            <button onclick="addToCart(${event.event_id})">Add to Cart</button>
                        `;
                        eventsSection.appendChild(eventCard);
                    });
                }
            } catch (error) {
                console.error('Error fetching events:', error);
            }
        }


        async function addToCart(eventId) {
            // Implement adding an item to the cart
            console.log(`Added event with ID ${eventId} to the cart`);
        }

        function checkout() {
            // Implement the checkout functionality
            console.log('Checkout button clicked');
        }

        // Call the fetchEvents function when the page loads
        window.addEventListener('load', fetchEvents);
    </script>

</body>

</html>
